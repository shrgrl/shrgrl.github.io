---
title: Film Sorgulama Uygulaması
layout: project-item
order: 1
---

<h5 class="txt-weight-bold">Açıklama</h5>
<p>
  Herkese merhaba. Burada, bir MongoDB veritabanı üzerinde arama yapıp, aradığımız filmin özelliklerini bize gösteren bir uygulamadan bahsedeceğim. Extra olarak, RedisCache 
  kullanımı ve sorgulama işlemlerinin hızlandırılmasını göreceğiz.Kaynak kodlar için Github hesabımı takip edebilirsiniz:</p>
<p><a href="https://github.com/shrgrl/moviesIndexDemoRedis" target="_blank" class="btn btn-sasha-darkest"><i class="fab fa-github"></i>Fork me</a></p>

<h5 class="txt-weight-bold">Kullanılan Teknolojiler</h5>
<ul>
  <li>HTML</li>
  <li>Node.js</li>
  <li>Express</li>
  <li>Mongoose</li>
  <li>RedisCache</li>
</ul>

<h5 class="txt-weight-bold">MongoDB</h5>
<p>Uygulamanın detaylarına geçmeden önce kısaca MongoDB'den bahselim. MongoDB, basit anlatımı ile açık kaynak kodlu bir NoSQL veritabanı uygulamasıdır. 
  Esnek ve kullanımı kolay olması nedeniyle kısa zamanda popüler olmuş olup, yaygın bir kitle tarafından kullanılmaktadır. Özelliklerini şu şekilde sıralayabiliriz:</p>
<ul>
  <li>Öncelikli özellik, ölçeklenebilir olmasıdır (scalable).</li>
  <li>Verileri belge olarak saklar. JSON verileri kullanılabilir. Veriler JSON olarak saklandığı için gelen verilerin yapısı değişse dahi kaydetme konusunda herhangi bir sıkıntı yaşamazsınız.</li>
  <li>Verilerin birden fazla kopyasını saklayabilirsiniz. Böylelikle veri kaybının da önüne geçmiş olursunuz.</li>
  <li>Veriler üzerinde index oluşturabilirsiniz. Böylelikle aradığınız tüm verilere hızlı ve kolay bir şekilde ulaşabilirsiniz.</li>
</ul>

<h5 class="txt-weight-bold">Windows için MongoDB Kurulumu</h5>
<ul>
  <li>İlk olarak bilgisayarınızın işletim sistemine uygun olan MongoDB programını indirmekle başlayın. Programın indirildiği yolu Windows path sisteminize eklerseniz ilerleyen dönemlerde komutlarınızı çok daha rahat bir şekilde çalıştırabilirsiniz. 
    Programı indirmek için <a href="https://www.mongodb.org/downloads" target="_blank" class="btn btn-sasha-darkest">bu</a> linki kullanabilirsiniz.</li>
  <li>İndirdiğiniz kurulum dosyasına tıklayın ve sizi yönlendiren adımları izleyerek kurulum işlemlerini tamamlayın. İndirme yolunuz şöyle olacak: <i>C:\Program Files\MongoDB\Server\3.0.1\bin</i></li>
  <li>Bu yola gittikten sonra sizin için önemli olan iki dosya göreceksiniz: <i>mongo.exe</i> ve <i>mongod.exe</i></li>
  <li>MongoDB kullanımı için Command Prompt kullanırsanız bundan sonraki adımlarda rahat edersiniz. Önce biraz önce kullandığınız yolu ortam değişkenlerine ekleyin. Bunun için bilgisayar dosyasına sağ tıklayın ve özelliklere gittikten sonra gelişmiş sistem ayarlarına tıklayın. Burada ortam değişkenlerini göreceksiniz.</li>
  <li>Ortam değişkenlerine girdikten sonra önünüze bir pencere açılacak. Bu pencerede ilgili path’i bulun ve en sonuna MongoDB’nin kendi yolunu yapıştırın.</li>
  <li>İşlem tamam ise, bir sonraki adımda veritabanınızın kaydedileceği yeri belirlemeniz gerekiyor. Öncelikle Cmd’yi açın ve şu komutları çalıştırın: md \data, md \data\db. Bu komutları çalıştırarak önce C dizininin altında bir data klasörü oluşturdunuz, ardından bu data klasörünün de altında db klasörü oluşturdunuz.</li>
  <li>Artık veritabanı uygulamanızı çalıştırabilirsiniz. Server için mongon yazın. Karşınızdaki ekranda “on port 27017” şeklinde bir yazı görürseniz, kurulumunuzu başarıyla gerçekleştirdiniz demektir.</li>
</ul>

<h5 class="txt-weight-bold">Redis Cache</h5>
<p>Redis; no-sql veritabanı olarak, önbellekleme için ve mesaj sunucusu amacıyla kullanılan, in-memory bir veri-yapıları deposudur. Redis’in kendisini veri-yapıları deposu olarak 
  adlandırmasındaki sebep diğer alternatiflerine göre daha fazla veri türünü desteklemesidir. Avantajlarını şu şekilde sıralayabiliriz:</p>
<ul>
  <li>Senkron çalıştığı için son derece hızlıdır.</li>
  <li>Birçok veri türünü destekler.</li>
  <li>Veriyi hem RAM üzerine hem de ayarlandığınız konfigürasyona göre disk üzerine kaydedebilir.</li>
  <li>Disk üzerine kayıt yaptığı için restart sonrasında aynı verilerle çalışmaya devam eder.</li>
  <li>Son derece aktif bir kullanıcı kitlesine sahiptir.</li>
  <li>Sharding, Cluster, Sentinel, Replication gibi birçok enterprise özelliklere sahiptir.</li>
</ul>

<h5 class="txt-weight-bold">Projenin Çalıştırılması</h5>
<p>Bu proje github sayfasında yer alan Movies.csv dosyasını kullanan bir web uygulamasıdır ve <i>Node.js/Express/MongoDB/RedisCache</i> ile yazılmış olup, lokal bilgisayarımızda 
  çalıştırabilmekteyiz. Öncelikli olarak Movies.csv dosyasını bilgisayarınızdaki MongoDB veri tabanına import etmemiz gerekmektedir.</p>

{% highlight javascript %}
mongoimport --db dataBaseAdi --collection collectionAdi --type csv --headerline --file csvDosyaAdi.csv
{% endhighlight %}

<p>Kök dizinine yapılan get request’ler kullanıcının veri girişi yapabileceği bir text kutusu ve sorgula butonu içeren bir html sayfasını response olarak geri döndürüyor. 
  Kullanıcının bu text kutucuğunun içerisine yazdığı bir film adını sorgula butonunu tıklayarak web sunucusuna ilettiği bir post request sonrasında ilgili filmin tüm özellikleri
  bir tablo içerisinde response olarak geriye döndürülüyor. Post request ile sunucuya ulaşan film adı önce ön bellekte aranıyor ve bulunursa hemen geriye gönderiliyor. 
  Ön bellekte rastlanamayan film bilgisi veri tabanında aranıyor ve bulunursa hem ön belleğe getiriliyor, hem de yine tablo formatında kullanıcıya response olarak iletiliyor. 
  Ön bellekte saklanan veriler için Hash veri yapısından faydalanılıldı.</p>
<p>Projeyi çalıştırırken, projenin bulunduğu kök dizininde komut ekranı açılmalı ve ortamı oluşturmak için ilk önce initialize işlemini yapmamız gerekli. Bu işlemin ardından bize çeşitli 
  sorular gelecektir. İstersek bunları cevaplayabiliriz, istersek de enter diyerek atlayabiliriz.</p>
{% highlight javascript %}
npm init
{% endhighlight %}

<p>Daha sonra projeyi yazarken kullandığımız modüller sırayla install edilmeli.</p>
{% highlight javascript %}
npm install express
npm install redis
npm install body-parser
npm install mongoose
{% endhighlight %}

<p>Modülleri indirdikten sonra projemizi çalıştırabiliriz.</p>
{% highlight javascript %}
node moviesIndexDemo.js
{% endhighlight %}

<a href="{{ base }}/assets/images/filmsorgu/img1.JPG" data-toggle="lightbox" data-max-height="1000"  data-max-width="1000">
<img class="img-blg" src="{{ base }}/assets/images/filmsorgu/img1.JPG" alt=""></a><br/>

<p>Komut ekranında gösterilen port adresini web tarayıcımıza yazdıktan sonra karşımıza uygulamamız gelecek.</p>
<a href="{{ base }}/assets/images/filmsorgu/img2.JPG" data-toggle="lightbox" data-max-height="1000"  data-max-width="1000">
<img class="img-blg" src="{{ base }}/assets/images/filmsorgu/img2.JPG" alt=""></a><br/>

<p>Ana sayfamızda bulunan arama ekranına veritabanımızda bulunan bir film adı yazıp Ara butonuna basmamız gerekiyor. İşlemin ardından bize aradığımız film ile ilgili veritabanındaki tüm bilgiler yansıtılıyor.</p>
<a href="{{ base }}/assets/images/filmsorgu/img3.JPG" data-toggle="lightbox" data-max-height="1000"  data-max-width="1000">
<img class="img-blg" src="{{ base }}/assets/images/filmsorgu/img3.JPG" alt=""></a><br/>

<p>Aradığımız film Redis Cache'de bulunmuyorsa, film Redis Cache'e ekleniyor. Diğer aramalarda Redis Cache'den kullanılıyor.</p>
<a href="{{ base }}/assets/images/filmsorgu/img4.JPG" data-toggle="lightbox" data-max-height="1000"  data-max-width="1000">
<img class="img-blg" src="{{ base }}/assets/images/filmsorgu/img4.JPG" alt=""></a><br/>

<p>Eğer kutucuğu boş bırakırsak bize bir uyarı kutucuğu gösteriliyor.</p>
<a href="{{ base }}/assets/images/filmsorgu/img5.JPG" data-toggle="lightbox" data-max-height="1000"  data-max-width="1000">
<img class="img-blg" src="{{ base }}/assets/images/filmsorgu/img5.JPG" alt=""></a><br/>


<p>Kutucuğa veritabanında bulunmayan bir film adı girdiğimizde ise karşımıza filmin bulunamadığına dair bir yazı çıkıyor.</p>
<a href="{{ base }}/assets/images/filmsorgu/img6.JPG" data-toggle="lightbox" data-max-height="1000"  data-max-width="1000">
<img class="img-blg" src="{{ base }}/assets/images/filmsorgu/img6.JPG" alt=""></a><br/>

<p>Uygulamanın arayüzleri ve işleyişi bu şekildedir.</p>
